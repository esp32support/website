<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Purchase Successful - ESP32 CAN Sniffer</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect x='20' y='20' width='60' height='60' fill='%237dd3fc' stroke='%23bae6fd' stroke-width='2' rx='4'/%3E%3Crect x='25' y='25' width='50' height='50' fill='%23080a10'/%3E%3Ccircle cx='20' cy='35' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='20' cy='50' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='20' cy='65' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='80' cy='35' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='80' cy='50' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='80' cy='65' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='35' cy='20' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='50' cy='20' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='65' cy='20' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='35' cy='80' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='50' cy='80' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='65' cy='80' r='2' fill='%237dd3fc'/%3E%3C/svg%3E" />
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect x='20' y='20' width='60' height='60' fill='%237dd3fc' stroke='%23bae6fd' stroke-width='2' rx='4'/%3E%3Crect x='25' y='25' width='50' height='50' fill='%23080a10'/%3E%3Ccircle cx='20' cy='35' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='20' cy='50' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='20' cy='65' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='80' cy='35' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='80' cy='50' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='80' cy='65' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='35' cy='20' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='50' cy='20' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='65' cy='20' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='35' cy='80' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='50' cy='80' r='2' fill='%237dd3fc'/%3E%3Ccircle cx='65' cy='80' r='2' fill='%237dd3fc'/%3E%3C/svg%3E" />
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="cookie-consent.css" />
    
    <!-- Google Analytics - Only loads if user accepts cookies -->
    <script>
        window.gaId = 'G-6KFL6RX1SM'; // âœ… Google Analytics ID
    </script>
    <style>
        .success-container {
            max-width: 600px;
            margin: 4rem auto;
            padding: 2rem;
            background: rgba(8, 10, 16, 0.9);
            border-radius: 8px;
            border: 1px solid rgba(0, 170, 0, 0.3);
            text-align: center;
        }
        .success-icon {
            font-size: 4rem;
            color: #00AA00;
            margin-bottom: 1rem;
        }
        .success-container h1 {
            color: #e5e9f0;
            margin-bottom: 1rem;
        }
        .success-container p {
            color: #cbd5f5;
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        .info-box {
            background: rgba(125, 211, 252, 0.1);
            border: 1px solid rgba(125, 211, 252, 0.3);
            border-radius: 4px;
            padding: 1.5rem;
            margin: 2rem 0;
            text-align: left;
        }
        .info-box h3 {
            color: #7dd3fc;
            margin-bottom: 1rem;
        }
        .info-box ol {
            color: #cbd5f5;
            line-height: 1.8;
        }
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background: #7dd3fc;
            color: #000000 !important;
            text-decoration: none;
            border-radius: 4px;
            font-weight: bold;
            margin-top: 1rem;
        }
        .btn:hover {
            background: #5bc0de;
            color: #000000 !important;
        }
        .btn * {
            color: #000000 !important;
        }
    </style>
</head>
<body>
    <header class="hero" style="min-height: auto; padding: 1rem 0;">
        <div class="container">
            <nav class="nav">
                <span class="logo">ESP32 CAN BUS Sniffer</span>
                <div class="nav-links">
                    <a href="index.html">Home</a>
                </div>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="success-container">
            <div class="success-icon">âœ“</div>
            <h1>Payment Successful!</h1>
            <p>Thank you for your purchase. You will receive an email shortly.</p>
            
            <div class="info-box">
                <h3>What's Next?</h3>
                <ol>
                    <li><strong>Your payment was successful!</strong> We'll process your license within 24 hours.</li>
                    <li>Check your email inbox (and spam folder) for your license key</li>
                    <li>Open ESP32 CAN Sniffer</li>
                    <li>Go to <strong>Help â†’ About â†’ License Activation</strong></li>
                    <li>Enter your license key and email address</li>
                    <li>Click "Activate License"</li>
                </ol>
            </div>
            
            <div class="info-box" id="licenseProcessingBox" style="background: rgba(125, 211, 252, 0.15); border-color: #7dd3fc; display: none;">
                <h3>License Processing</h3>
                <p>Your license key will be generated and sent to your email address within 24 hours of payment confirmation.</p>
                <p><strong>Email:</strong> <span id="customerEmail"></span></p>
                <p><strong>Hardware ID:</strong> <code id="hardwareId" style="font-size: 0.9rem;"></code></p>
            </div>
            
            <div class="info-box" id="addonBox" style="background: rgba(0, 170, 0, 0.1); border-color: rgba(0, 170, 0, 0.3); display: none;">
                <h3>ðŸ”§ Add-Ons</h3>
                <p>If you purchased any add-ons (such as the Fiat Dictionary Add-On), the files will be sent to your email address as a zip file.</p>
                <p><strong>What to expect:</strong></p>
                <ul style="color: #cbd5f5; line-height: 1.8; margin-left: 1.5rem;">
                    <li>Add-on files will be sent via email within 24-48 hours</li>
                    <li>Files will be in a zip format</li>
                    <li>Simply extract the zip file and place the files in your ESP32 CAN Sniffer installation directory</li>
                    <li>Make sure to check your spam folder if you don't see the email</li>
                </ul>
                <p style="margin-top: 1rem;"><strong>Email:</strong> <span id="addonEmail"></span></p>
            </div>
            
            <p>If you don't receive your license key or add-on files within the expected time, please contact us at 
            <a href="mailto:esp32contact@gmail.com" style="color: #7dd3fc;">esp32contact@gmail.com</a> with your payment confirmation.</p>
            
            <script>
                // Display stored purchase info
                const email = sessionStorage.getItem('purchase_email');
                const hwId = sessionStorage.getItem('purchase_hardware_id');
                const addonEmail = sessionStorage.getItem('addon_purchase_email');
                const addonLicenseKey = sessionStorage.getItem('addon_purchase_license_key');
                
                // Determine what was purchased
                const isLicensePurchase = email && hwId; // License purchase has email and hardware ID
                const isAddonPurchase = addonEmail || addonLicenseKey; // Add-on purchase has addon email or license key
                
                // Show/hide sections based on purchase type
                if (isLicensePurchase) {
                    // Show license processing section
                    document.getElementById('licenseProcessingBox').style.display = 'block';
                    document.getElementById('customerEmail').textContent = email;
                    document.getElementById('hardwareId').textContent = hwId;
                }
                
                if (isAddonPurchase) {
                    // Show add-on section
                    document.getElementById('addonBox').style.display = 'block';
                    // Display add-on email (use main email if add-on email not available)
                    if (addonEmail) {
                        document.getElementById('addonEmail').textContent = addonEmail;
                    } else if (email) {
                        document.getElementById('addonEmail').textContent = email;
                    } else {
                        document.getElementById('addonEmail').textContent = 'N/A';
                    }
                }
                
                // If neither section should be shown (direct page access), show both as fallback
                if (!isLicensePurchase && !isAddonPurchase) {
                    // User accessed page directly - show both sections as informational
                    document.getElementById('licenseProcessingBox').style.display = 'block';
                    document.getElementById('addonBox').style.display = 'block';
                    document.getElementById('customerEmail').textContent = 'N/A';
                    document.getElementById('hardwareId').textContent = 'N/A';
                    document.getElementById('addonEmail').textContent = 'N/A';
                }
                
                // Clear stored data
                sessionStorage.removeItem('purchase_email');
                sessionStorage.removeItem('purchase_hardware_id');
                sessionStorage.removeItem('purchase_plan');
                sessionStorage.removeItem('addon_purchase_email');
                sessionStorage.removeItem('addon_purchase_license_key');
            </script>
            
            <a href="index.html" class="btn">Return to Home</a>
        </div>
    </div>
    
    <!-- Cookie Consent (GDPR Compliant) -->
    <script src="cookie-consent.js"></script>
</body>
</html>

